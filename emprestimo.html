<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simular Empréstimo</title>
  <link rel="shortcut icon" href="logot.png" type="image/x-icon">
  <link rel="stylesheet" href="styles2.css">
</head>
<body>
  <div class="container">
    <h1>Empréstimo</h1>
    <form id="loan-form">
      <div class="form-group">
        <label for="name">Nome</label>
        <input type="text" id="name" placeholder="Digite seu nome" required>
      </div>
      <div class="form-group">
        <label for="address">Endereço</label>
        <input type="text" id="address" placeholder="Digite seu endereço" required>
      </div>
      <div class="form-group">
        <label for="cpf">CPF</label>
        <input type="text" id="cpf" placeholder="Digite seu CPF" required>
      </div>
      <div class="form-group">
        <label for="amount">Valor do Empréstimo</label>
        <input type="number" id="amount" placeholder="Digite o valor" required>
      </div>
      <div class="form-group">
        <label for="months">Parcelas (até 5 vezes)</label>
        <input type="number" id="months" max="5" placeholder="Digite o número de parcelas" required>
      </div>
      <button type="submit">Simular Empréstimo</button>
    </form>
    <div id="results" class="hidden">
      <h2>Resultado</h2>
      <div id="monthly-payment"></div>
      <div id="total-payment"></div>
      <div id="amount-simulated"></div>
      <div id="months-simulated"></div>
      <div id="interest-rate"></div>
      <div id="days-until-first-payment"></div>
      <div id="total-interest"></div>
      <button id="send-email">Enviar para análise</button>
    </div>
  </div>
  <script>
    document.getElementById('loan-form').addEventListener('submit', function(e) {
      e.preventDefault();

      var name = document.getElementById('name').value;
      var address = document.getElementById('address').value;
      var cpf = document.getElementById('cpf').value;
      var amount = parseFloat(document.getElementById('amount').value);
      var months = parseInt(document.getElementById('months').value);

      var monthlyInterestRate = 0.18; // 18% ao mês

      var monthlyPayment = (amount * monthlyInterestRate) / (1 - Math.pow(1 + monthlyInterestRate, -months));
      var totalPayment = monthlyPayment * months;
      var totalInterest = totalPayment - amount;
      var daysUntilFirstPayment = 30;

      document.getElementById('results').classList.remove('hidden');
      document.getElementById('monthly-payment').innerHTML = 'Valor da Parcela: R$ ' + monthlyPayment.toFixed(2);
      document.getElementById('total-payment').innerHTML = 'Total das Parcelas: R$ ' + totalPayment.toFixed(2);
      document.getElementById('amount-simulated').innerHTML = 'Valor Simulado: R$ ' + amount.toFixed(2);
      document.getElementById('months-simulated').innerHTML = 'Prazo: ' + months + ' parcelas';
      document.getElementById('interest-rate').innerHTML = 'Taxa de Juros: ' + (monthlyInterestRate * 100).toFixed(2) + '% a.m.';
      document.getElementById('days-until-first-payment').innerHTML = 'Dias até a primeira parcela: ' + daysUntilFirstPayment;
      document.getElementById('total-interest').innerHTML = 'Total dos Juros: R$ ' + totalInterest.toFixed(2);

      localStorage.setItem('clientName', name);
      localStorage.setItem('clientAddress', address);
      localStorage.setItem('clientCPF', cpf);
    });

    document.getElementById('send-email').addEventListener('click', function() {
      var name = localStorage.getItem('clientName');
      var address = localStorage.getItem('clientAddress');
      var cpf = localStorage.getItem('clientCPF');

      var amountSimulated = document.getElementById('amount-simulated').innerText;
      var monthsSimulated = document.getElementById('months-simulated').innerText;
      var monthlyPayment = document.getElementById('monthly-payment').innerText;
      var interestRate = document.getElementById('interest-rate').innerText;
      var daysUntilFirstPayment = document.getElementById('days-until-first-payment').innerText;
      var totalInterest = document.getElementById('total-interest').innerText;

      var emailBody = "Nome: " + name + "\n" +
                      "Endereço: " + address + "\n" +
                      "CPF: " + cpf + "\n" +
                      "Valor Simulado: " + amountSimulated.substring(15) + "\n" +
                      "Prazo: " + monthsSimulated.substring(9) + "\n" +
                      "Valor da Parcela: " + monthlyPayment.substring(20) + "\n" +
                      "Taxa de Juros: " + interestRate.substring(14) + "\n" +
                      "Dias até a primeira parcela: " + daysUntilFirstPayment.substring(27) + "\n" +
                      "Total dos Juros: " + totalInterest.substring(16);

      window.location.href = "mailto:leandrosouzasilva814@gmail.com?subject=Solicitação de Empréstimo&body=" + encodeURIComponent(emailBody);
    });
  </script>
</body>
                                   </html>
          
